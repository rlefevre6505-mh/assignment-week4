(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const d=new Date;let v=d.getDate(),y=d.getMonth()+1,g=d.getFullYear(),l=`${g}-${y}-${v}`;const w=document.getElementById("date-setter1");w.setAttribute("max",l);const h=document.getElementById("date-setter2");h.setAttribute("max",l);const u=document.getElementById("review-form");function b(s){s.preventDefault();const t=new FormData(u),r=Object.fromEntries(t);console.log(r),fetch("https://guestbook-server-1j5c.onrender.com/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formValues:r})}),document.getElementById("review-form").reset()}u.addEventListener("submit",b);const a=document.getElementById("previous-reviews");async function m(){return await(await fetch("https://guestbook-server-1j5c.onrender.com/storedreviews")).json()}async function L(){const s=await m();for(let t=0;t<s.length||t<50;t++){const r=document.createElement("div"),n=document.createElement("p"),e=document.createElement("p"),o=s[t].date_in.toString(),i=s[t].date_out.toString(),f=o.slice(0,10),p=i.slice(0,10);n.textContent=`Review by ${s[t].name} from ${s[t].location}, who stayed with us from ${f} to ${p}:`,e.textContent=`${s[t].comments}`,r.classList.add("old-review"),r.id=t,r.classList.add("review-box"),n.classList.add("details-p"),e.classList.add("comments-p"),a.appendChild(r),r.appendChild(n),r.appendChild(e)}}L(m());const c=document.getElementById("sort-button");c.addEventListener("click",function(){c.innerText=="sort by: oldest"?(c.innerText="sort by: latest",a.classList.remove("previous-reviews-reverse"),a.classList.add("previous-reviews")):c.innerText=="sort by: latest"&&(c.innerText="sort by: oldest",a.classList.remove("previous-reviews"),a.classList.add("previous-reviews-reverse"))});
