(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const d=new Date;let y=d.getDate(),g=d.getDate()+1,l=d.getMonth()+1,u=d.getFullYear(),w=`${u}-${l}-${y}`,h=`${u}-${l}-${g}`;const b=document.getElementById("date-setter1");b.setAttribute("max",w);const L=document.getElementById("date-setter2");L.setAttribute("max",h);const m=document.getElementById("review-form");function E(s){s.preventDefault();const t=new FormData(m),r=Object.fromEntries(t);console.log(r),fetch("https://guestbook-server-1j5c.onrender.com/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formValues:r})}),document.getElementById("review-form").reset()}m.addEventListener("submit",E);const a=document.getElementById("previous-reviews");async function f(){return await(await fetch("https://guestbook-server-1j5c.onrender.com/storedreviews")).json()}async function x(){const s=await f();for(let t=0;t<s.length||t<50;t++){const r=document.createElement("div"),n=document.createElement("p"),e=document.createElement("p"),o=s[t].date_in.toString(),i=s[t].date_out.toString(),p=o.slice(0,10),v=i.slice(0,10);n.textContent=`Review by ${s[t].name} from ${s[t].location}, who stayed with us from ${p} to ${v}:`,e.textContent=`${s[t].comments}`,r.classList.add("old-review"),r.id=t,r.classList.add("review-box"),n.classList.add("details-p"),e.classList.add("comments-p"),a.appendChild(r),r.appendChild(n),r.appendChild(e)}}x(f());const c=document.getElementById("sort-button");c.addEventListener("click",function(){c.innerText=="sort by: oldest"?(c.innerText="sort by: latest",a.classList.remove("previous-reviews-reverse"),a.classList.add("previous-reviews")):c.innerText=="sort by: latest"&&(c.innerText="sort by: oldest",a.classList.remove("previous-reviews"),a.classList.add("previous-reviews-reverse"))});
